<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_17) on Sun Mar 16 16:13:00 IST 2014 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>DataBase</title>
<meta name="date" content="2014-03-16">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DataBase";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DataBase.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../com/unitedcaterers/db/DataBaseImpl.html" title="class in com.unitedcaterers.db"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/unitedcaterers/db/DataBase.html" target="_top">Frames</a></li>
<li><a href="DataBase.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.unitedcaterers.db</div>
<h2 title="Interface DataBase" class="title">Interface DataBase</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../com/unitedcaterers/serverwithoutlockcookie/ClientProxy.html" title="class in com.unitedcaterers.serverwithoutlockcookie">ClientProxy</a>, <a href="../../../com/unitedcaterers/db/DataBaseImpl.html" title="class in com.unitedcaterers.db">DataBaseImpl</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">DataBase</span></pre>
<div class="block">This is the database interface given in the requirements of the assignment. <br><br>
 In "Bodgitt and Scarper" assignment given by Sun, the lock() method returns a
 lock key and the same lock key is passed as an argument to update, delete, and unlock methods.
 <br><br>
 In "UrlyBird" assignment, the lock method does not return any key/lock cookie
 and the update, delete, and unlock methods do not take lockkey argument. Yet,
 the assignment includes the requirement that only the client that locked record
 should be able to unlock it. There are three ways to solve this issue -
 <ol>
 <li>Modify the signatures of the interface methods to include a lock key and
 explain it in details in your choices.txt. The justification for this approach is as follows-
 We are building and exporting a stateless service through RMI. Thus, it is not correct to
 provide a stateful object on server per client just to implement the locking mechanism.
 In a stateless service, ideally, the locking should be taken care of by the business service
 exposed by the server. The client should not be locking and unlocking the db rows explicilty.
 If at all this is required, then the signature of the lock and unlock method should be changed
 to include lockkey (lock cookie) so that the service may still remain stateless.
 <li>Ignore the requirement that the row can only be unlocked by the same client.
 Explain in choices.txt that since the interface methods do not support a lock key mechanism,
 this functionality will depend on identifying a client based on its ip, which is unreliable.
 Further, lock/unlock methods are not directly used by clients anyway. The clients
 use the higher level book() method, so there is no chance of a client unlocking
 a row locked by some other client.
 <li>Associate a client proxy object with each connected client on the server.
 This approach is described in some books and is implemented in com.unitedcaterers.serverwithoutlockcookie package.
 
 
</ol>
 <br><br>
 In this interface, we have included both kind of methods - with as well as without lock cookie. 
 <br>com.unitedcaterers.server package uses methods that take "cookie" parameter while 
 com.unitedcaterers.serverwithoutlockcookies package uses methods that don't take "cookie" parameter.
 <br><br>
 You can use either of the packages. Please see com.unitedcaterers.ApplicationMain and 
 com.unitedcaterers.client.ClientController classes to see
 where you need to make a change to select the appropriate package.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/unitedcaterers/db/DataBase.html#create(java.lang.String[])">create</a></strong>(java.lang.String[]&nbsp;data)</code>
<div class="block">Creates a new record in the database (possibly reusing a
deleted entry).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/unitedcaterers/db/DataBase.html#delete(int, java.lang.String)">delete</a></strong>(int&nbsp;recNo,
      java.lang.String&nbsp;lockkey)</code>
<div class="block">Deletes a record, making the record number and associated
data slot (row) available for reuse.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/unitedcaterers/db/DataBase.html#deleteWithoutCookie(int)">deleteWithoutCookie</a></strong>(int&nbsp;recNo)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/unitedcaterers/db/DataBase.html#find(java.lang.String[])">find</a></strong>(java.lang.String[]&nbsp;criteria)</code>
<div class="block">Returns an array of record numbers that match the specified
criteria.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/unitedcaterers/db/DataBase.html#lock(int)">lock</a></strong>(int&nbsp;recNo)</code>
<div class="block">Locks a record so that it can only be updated or deleted by this client.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/unitedcaterers/db/DataBase.html#lockWithoutCookie(int)">lockWithoutCookie</a></strong>(int&nbsp;recNo)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/unitedcaterers/db/DataBase.html#read(int)">read</a></strong>(int&nbsp;recNo)</code>
<div class="block">Reads a record from the file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/unitedcaterers/db/DataBase.html#unlock(int, java.lang.String)">unlock</a></strong>(int&nbsp;recNo,
      java.lang.String&nbsp;lockkey)</code>
<div class="block">Releases the lock on a record.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/unitedcaterers/db/DataBase.html#unlockWithoutCookie(int)">unlockWithoutCookie</a></strong>(int&nbsp;recNo)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/unitedcaterers/db/DataBase.html#update(int, java.lang.String[], java.lang.String)">update</a></strong>(int&nbsp;recNo,
      java.lang.String[]&nbsp;data,
      java.lang.String&nbsp;lockkey)</code>
<div class="block">Modifies the fields of a record.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/unitedcaterers/db/DataBase.html#updateWithoutCookie(int, java.lang.String[])">updateWithoutCookie</a></strong>(int&nbsp;recNo,
                   java.lang.String[]&nbsp;data)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="read(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>java.lang.String[]&nbsp;read(int&nbsp;recNo)
                        throws <a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a></pre>
<div class="block">Reads a record from the file.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - The record number to be read.</dd>
<dt><span class="strong">Returns:</span></dt><dd>an array where each element is a record value.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="update(int, java.lang.String[], java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>void&nbsp;update(int&nbsp;recNo,
          java.lang.String[]&nbsp;data,
          java.lang.String&nbsp;lockkey)
            throws <a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a>,
                   <a href="../../../com/unitedcaterers/db/SecurityException.html" title="class in com.unitedcaterers.db">SecurityException</a></pre>
<div class="block">Modifies the fields of a record. The new value for field n
appears in data[n]. Throws SecurityException if the record
is locked with a key other than lockkey.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - The record to be updated.</dd><dd><code>data</code> - The values that need to be stored.</dd><dd><code>lockkey</code> - The key using which the record was locked.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a></code></dd>
<dd><code><a href="../../../com/unitedcaterers/db/SecurityException.html" title="class in com.unitedcaterers.db">SecurityException</a></code></dd></dl>
</li>
</ul>
<a name="delete(int, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>void&nbsp;delete(int&nbsp;recNo,
          java.lang.String&nbsp;lockkey)
            throws <a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a>,
                   <a href="../../../com/unitedcaterers/db/SecurityException.html" title="class in com.unitedcaterers.db">SecurityException</a></pre>
<div class="block">Deletes a record, making the record number and associated
data slot (row) available for reuse.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - The record that needs to be deleted.</dd><dd><code>lockkey</code> - The key using which the record was locked.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/unitedcaterers/db/SecurityException.html" title="class in com.unitedcaterers.db">SecurityException</a></code> - If the record is locked with a key other than lockkey.</dd>
<dd><code><a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="find(java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>find</h4>
<pre>int[]&nbsp;find(java.lang.String[]&nbsp;criteria)</pre>
<div class="block">Returns an array of record numbers that match the specified
criteria. Field n in the database file is described by
criteria[n]. A null value in criteria[n] matches any field
value. A non-null  value in criteria[n] matches any field
value that begins with criteria[n]. (For example, "Queen"
matches "Queen" or "Queens".)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>criteria</code> - The values that need to be searched.</dd>
<dt><span class="strong">Returns:</span></dt><dd>all the record numbers that match the criteria</dd></dl>
</li>
</ul>
<a name="create(java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>int&nbsp;create(java.lang.String[]&nbsp;data)
           throws <a href="../../../com/unitedcaterers/db/DuplicateKeyException.html" title="class in com.unitedcaterers.db">DuplicateKeyException</a></pre>
<div class="block">Creates a new record in the database (possibly reusing a
deleted entry). Inserts the given data, and returns the record
number of the new record.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - The values for the new record.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The record number.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/unitedcaterers/db/DuplicateKeyException.html" title="class in com.unitedcaterers.db">DuplicateKeyException</a></code></dd></dl>
</li>
</ul>
<a name="lock(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lock</h4>
<pre>java.lang.String&nbsp;lock(int&nbsp;recNo)
                      throws <a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a></pre>
<div class="block">Locks a record so that it can only be updated or deleted by this client.
Returned value is a string (lockkey) that must be used when the record is unlocked,
updated, or deleted. If the specified record is already locked by a different
client, the current thread gives up the CPU and consumes no CPU cycles until
the record is unlocked.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - The record to be locked.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A Lock Key that should be used in subsequent calls to update, unlock, or delete.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="unlock(int, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlock</h4>
<pre>void&nbsp;unlock(int&nbsp;recNo,
          java.lang.String&nbsp;lockkey)
            throws <a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a>,
                   <a href="../../../com/unitedcaterers/db/SecurityException.html" title="class in com.unitedcaterers.db">SecurityException</a></pre>
<div class="block">Releases the lock on a record. lockkey must be the key
that was returned when the record was locked; otherwise it throws SecurityException.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - The record to be unlocked.</dd><dd><code>lockkey</code> - The key that was used to lock the record.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a></code></dd>
<dd><code><a href="../../../com/unitedcaterers/db/SecurityException.html" title="class in com.unitedcaterers.db">SecurityException</a></code></dd></dl>
</li>
</ul>
<a name="lockWithoutCookie(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockWithoutCookie</h4>
<pre>void&nbsp;lockWithoutCookie(int&nbsp;recNo)
                       throws <a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="unlockWithoutCookie(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockWithoutCookie</h4>
<pre>void&nbsp;unlockWithoutCookie(int&nbsp;recNo)
                         throws <a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a>,
                                <a href="../../../com/unitedcaterers/db/SecurityException.html" title="class in com.unitedcaterers.db">SecurityException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a></code></dd>
<dd><code><a href="../../../com/unitedcaterers/db/SecurityException.html" title="class in com.unitedcaterers.db">SecurityException</a></code></dd></dl>
</li>
</ul>
<a name="updateWithoutCookie(int, java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateWithoutCookie</h4>
<pre>void&nbsp;updateWithoutCookie(int&nbsp;recNo,
                       java.lang.String[]&nbsp;data)
                         throws <a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a>,
                                <a href="../../../com/unitedcaterers/db/SecurityException.html" title="class in com.unitedcaterers.db">SecurityException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a></code></dd>
<dd><code><a href="../../../com/unitedcaterers/db/SecurityException.html" title="class in com.unitedcaterers.db">SecurityException</a></code></dd></dl>
</li>
</ul>
<a name="deleteWithoutCookie(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>deleteWithoutCookie</h4>
<pre>void&nbsp;deleteWithoutCookie(int&nbsp;recNo)
                         throws <a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a>,
                                <a href="../../../com/unitedcaterers/db/SecurityException.html" title="class in com.unitedcaterers.db">SecurityException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/unitedcaterers/db/RecordNotFoundException.html" title="class in com.unitedcaterers.db">RecordNotFoundException</a></code></dd>
<dd><code><a href="../../../com/unitedcaterers/db/SecurityException.html" title="class in com.unitedcaterers.db">SecurityException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DataBase.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../com/unitedcaterers/db/DataBaseImpl.html" title="class in com.unitedcaterers.db"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/unitedcaterers/db/DataBase.html" target="_top">Frames</a></li>
<li><a href="DataBase.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
